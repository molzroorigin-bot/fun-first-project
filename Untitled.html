<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡πÄ‡∏Å‡∏°‡∏™‡∏∏‡πà‡∏°‡∏≠‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏≤ - Advance Animation</title>
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0;
    font-family: 'Kanit', sans-serif;
    background: radial-gradient(circle at top, #ff2e2e, #7a0000);
    color: white;
    text-align: center;
    overflow: hidden;
    height: 100vh;
  }

  .container { padding: 40px 20px; }

  .envelopes-wrapper {
    position: relative;
    height: 200px;
    max-width: 600px;
    margin: 80px auto;
    display: flex;
    justify-content: center;
    perspective: 1000px;
  }

  .envelope {
    font-size: 80px;
    cursor: pointer;
    position: absolute; /* ‡πÉ‡∏ä‡πâ Absolute ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ï‡∏≤‡∏°‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÑ‡∏î‡πâ‡∏≠‡∏¥‡∏™‡∏£‡∏∞ */
    transition: all 0.4s cubic-bezier(0.45, 0.05, 0.55, 0.95);
    user-select: none;
    z-index: 1;
  }

  /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏ï‡∏≠‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏•‡∏±‡∏ö ‡πÉ‡∏´‡πâ‡∏ã‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏π‡∏°‡∏µ‡∏°‡∏¥‡∏ï‡∏¥ */
  .moving {
    z-index: 2;
    filter: drop-shadow(0 10px 15px rgba(0,0,0,0.3));
  }

  .status {
    font-size: 22px;
    margin-bottom: 10px;
    height: 30px;
  }

  .result {
    font-size: 32px;
    font-weight: 800;
    color: #ffd700;
    margin-top: 20px;
  }

  .won {
    transform: scale(1.4) rotateY(720deg) !important;
    z-index: 10 !important;
    filter: drop-shadow(0 0 30px gold) !important;
  }

  button {
    background: gold; border: none; padding: 10px 25px;
    border-radius: 25px; font-family: 'Kanit'; font-weight: bold;
    cursor: pointer; margin-top: 20px;
  }
</style>
</head>
<body>

<div class="container">
  <h1>üßß ‡πÄ‡∏Æ‡∏á ‡πÄ‡∏Æ‡∏á ‡πÄ‡∏Æ‡∏á</h1>
  <div id="status" class="status">‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...</div>

  <div class="envelopes-wrapper" id="wrap">
    <div class="envelope" data-pos="0">üßß</div>
    <div class="envelope" data-pos="1">üßß</div>
    <div class="envelope" data-pos="2">üßß</div>
    <div class="envelope" data-pos="3">üßß</div>
  </div>

  <div id="result" class="result"></div>
  <button id="resetBtn" style="display:none;">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
</div>

<script>
const wrap = document.getElementById("wrap");
const envelopes = Array.from(document.querySelectorAll(".envelope"));
const status = document.getElementById("status");
const resultText = document.getElementById("result");

// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (Spacing)
const spacing = 120; 
let positions = [-1.5, -0.5, 0.5, 1.5].map(mult => mult * spacing);
let currentMapping = [0, 1, 2, 3]; // ‡πÄ‡∏Å‡πá‡∏ö‡∏ß‡πà‡∏≤‡∏ã‡∏≠‡∏á‡πÑ‡∏´‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏´‡∏ô

function updateLayout() {
  envelopes.forEach((el, index) => {
    const posIndex = currentMapping[index];
    const xPos = positions[posIndex];
    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ (Y) ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏µ‡∏¢‡∏á (Rotate) ‡∏ï‡∏≤‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
    el.style.transform = `translateX(${xPos}px) rotate(${xPos/20}deg)`;
  });
}

function shuffle() {
  // ‡∏™‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö Index ‡πÉ‡∏ô currentMapping
  for (let i = currentMapping.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [currentMapping[i], currentMapping[j]] = [currentMapping[j], currentMapping[i]];
  }
  
  envelopes.forEach(el => el.classList.add('moving'));
  updateLayout();
  
  setTimeout(() => {
    envelopes.forEach(el => el.classList.remove('moving'));
  }, 400);
}

let shuffleCount = 0;
const maxShuffles = 15;

function startGame() {
  status.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏•‡∏±‡∏ö‡∏ã‡∏≠‡∏á...";
  const interval = setInterval(() => {
    shuffle();
    shuffleCount++;
    if (shuffleCount >= maxShuffles) {
      clearInterval(interval);
      status.innerText = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏≠‡∏á‡∏ô‡∏≥‡πÇ‡∏ä‡∏Ñ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì! üéØ";
      enableClick();
    }
  }, 500);
}

function enableClick() {
  envelopes.forEach(el => {
    el.onclick = () => {
      if (resultText.innerText !== "") return;
      
      const prize = [88, 168, 888, 1688, 999][Math.floor(Math.random()*5)];
      el.classList.add('won');
      resultText.innerText = `‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${prize} ‡∏ö‡∏≤‡∏ó`;
      status.innerText = "‡πÄ‡∏Æ‡∏á‡πÜ ‡∏£‡∏ß‡∏¢‡πÜ!";
      document.getElementById("resetBtn").style.display = "inline-block";
    };
  });
}

document.getElementById("resetBtn").onclick = () => location.reload();

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ß‡∏≤‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
updateLayout();
setTimeout(startGame, 1000);

</script>
</body>
</html>