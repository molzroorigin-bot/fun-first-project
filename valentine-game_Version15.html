<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏•‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏î‡∏π‡∏ã‡∏¥!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
        }

        .container {
            position: fixed;
            width: 500px;
            height: 600px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .title {
            font-size: 32px;
            color: #e91e63;
            text-align: center;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 14px;
            color: #999;
            text-align: center;
            margin-bottom: 20px;
        }

        .game-area {
            position: relative;
            width: 100%;
            height: 350px;
            background: linear-gradient(to bottom, #ffe6f0, #fff);
            border-radius: 15px;
            border: 2px dashed #ffb6d9;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            cursor: pointer;
            user-select: none;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            font-weight: bold;
            transition: transform 0.1s;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }

        .heart:hover {
            transform: scale(1.15);
        }

        .heart.small {
            width: 35px;
            height: 35px;
            font-size: 20px;
        }

        .heart.medium {
            width: 50px;
            height: 50px;
            font-size: 30px;
        }

        .heart.large {
            width: 70px;
            height: 70px;
            font-size: 45px;
        }

        .heart.pink {
            color: #ff1493;
        }

        .heart.green {
            color: transparent;
            box-shadow: none;
            background-color: transparent;
        }

        .heart.green img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        .heart.black {
            color: transparent;
            box-shadow: none;
            background-color: transparent;
        }

        .heart.black img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        @keyframes float-slow {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-400px) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes float-medium {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-400px) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes float-fast {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-400px) rotate(360deg);
                opacity: 0;
            }
        }

        .heart.speed-1 {
            animation: float-slow 3s ease-in infinite;
        }

        .heart.speed-1-5 {
            animation: float-medium 2s ease-in infinite;
        }

        .heart.speed-2-25 {
            animation: float-medium 1.33s ease-in infinite;
        }

        .heart.speed-3-375 {
            animation: float-fast 0.89s ease-in infinite;
        }

        .heart.speed-5 {
            animation: float-fast 0.6s ease-in infinite;
        }

        .heart.speed-7-5 {
            animation: float-fast 0.4s ease-in infinite;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin: 20px 0;
            text-align: center;
            gap: 10px;
        }

        .stat {
            flex: 1;
        }

        .stat-label {
            font-size: 12px;
            color: #999;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #e91e63;
        }

        .button {
            background: linear-gradient(135deg, #00c853 0%, #00a040 100%);
            color: white;
            border: none;
            padding: 12px 40px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            min-height: 45px;
            min-width: 150px;
            position: fixed;
            z-index: 100;
        }

        .button:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0, 200, 83, 0.4);
        }

        .button:active:not(:disabled) {
            transform: scale(0.98);
        }

        .button.dodging {
            animation: dodge 0.4s ease-in-out;
        }

        @keyframes dodge {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
            }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            justify-content: center;
            align-items: center;
            z-index: 999;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            animation: popIn 0.5s ease-out;
            max-width: 400px;
        }

        @keyframes popIn {
            0% {
                transform: scale(0) rotate(-10deg);
                opacity: 0;
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        .modal-content h1 {
            font-size: 48px;
            color: #e91e63;
            margin-bottom: 20px;
        }

        .modal-content p {
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
        }

        .hearts-animation {
            font-size: 60px;
            animation: bounce 0.6s ease-in-out infinite;
            margin: 20px 0;
        }

        @keyframes bounce {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }

        .image-container {
            max-width: 300px;
            margin: 20px 0;
        }

        .image-container img {
            width: 100%;
            height: auto;
            border-radius: 10px;
        }

        .time-info {
            font-size: 12px;
            color: #999;
            margin-top: 10px;
        }

        .bonus-text {
            color: #00c853;
            font-weight: bold;
            font-size: 12px;
            animation: pulse 0.5s ease-in-out;
            position: absolute;
            top: -15px;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.6;
            }
        }

        .click-count {
            font-size: 12px;
            color: #e91e63;
            font-weight: bold;
            margin-top: 8px;
            min-height: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">üíï ‡∏•‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏î‡∏π‡∏ã‡∏¥! üíï</div>
        <div class="subtitle" id="subtitle">‡πÄ‡∏ï‡∏∞‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö <span id="targetCount">30</span> ‡∏•‡∏π‡∏Å!</div>

        <div class="game-area" id="gameArea"></div>

        <div class="stats">
            <div class="stat">
                <div class="stat-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                <div class="stat-value" id="score">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å</div>
                <div class="stat-value" id="remaining">30</div>
            </div>
            <div class="stat">
                <div class="stat-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß</div>
                <div class="stat-value" id="speedLevel">1x</div>
            </div>
        </div>

        <div class="time-info" id="timeInfo">‡πÄ‡∏Å‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô *1.3 ‡∏ó‡∏∏‡∏Å‡πÜ 15 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ üöÄ</div>

        <div style="text-align: center;">
            <div class="click-count" id="clickCount"></div>
        </div>
    </div>

    <button class="button" id="startBtn" onclick="tryStartGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°!</button>

    <!-- Modal ‡∏ä‡∏ô‡∏∞ -->
    <div class="modal" id="winModal">
        <div class="modal-content">
            <div class="hearts-animation">üíùüíùüíù</div>
            <h1>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! üéâ</h1>
            <p>‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏ô‡∏∞‡πÅ‡∏•‡πâ‡∏ß!</p>
            <img src="https://via.placeholder.com/300x300/FFB6D9/FFFFFF?text=I+Love+You+üíï" alt="Winner Image" class="image-container">
            <p style="margin-top: 20px; font-size: 16px; color: #e91e63;">Happy Valentine üíï</p>
            <button class="button" onclick="location.reload()" style="margin-top: 20px;">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        </div>
    </div>

    <script>
        let targetHearts = 30;
        let score = 0;
        let gameRunning = false;
        let gameStartTime = 0;
        let speedMultiplier = 1;
        
        // ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏ô‡∏µ
        let buttonClickCount = 0;
        const REQUIRED_CLICKS = 4;
        const TEASE_MESSAGES = [
            '‡∏Æ‡∏±‡πà‡∏ô‡πÅ‡∏´‡∏ô‡πà!',
            '‡∏Å‡∏î‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞‡∏ô‡πä‡∏≠‡∏á‡∏á',
            '‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß',
            '‡∏≠‡∏∞‡∏¢‡πä‡∏≠‡∏°‡πÜ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÑ‡∏î‡πâ!',
            '‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡πâ‡∏≤!'
        ];

        // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏°‡∏∏‡∏° (4 ‡∏°‡∏∏‡∏°)
        const CORNER_POSITIONS = [
            { x: 20, y: 20, name: '‡∏ö‡∏ô‡∏ã‡πâ‡∏≤‡∏¢' },
            { x: window.innerWidth - 170, y: 20, name: '‡∏ö‡∏ô‡∏Ç‡∏ß‡∏≤' },
            { x: 20, y: window.innerHeight - 65, name: '‡∏•‡πà‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢' },
            { x: window.innerWidth - 170, y: window.innerHeight - 65, name: '‡∏•‡πà‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤' }
        ];

        const HEART_COLORS = {
            pink: 40,
            green: 10,
            black: 50
        };

        const HEART_SIZES = ['small', 'medium', 'large'];
        const SPEED_INCREASE_INTERVAL = 15000; // 15 seconds
        const SPEED_MULTIPLIER_FACTOR = 1.3;

        // ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß (‡πÇ‡∏ö‡∏ô‡∏±‡∏™ x2)
        const GREEN_HEART_IMAGE = 'https://i.ibb.co/mCyhs8vW/bonus-photo.jpg';
        
        // ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏î‡∏≥ (+2 target)
        const BLACK_HEART_IMAGE = 'https://i.ibb.co/1yqN4Px/test-photo-face.jpg';

        function getRandomCorner() {
            return CORNER_POSITIONS[Math.floor(Math.random() * CORNER_POSITIONS.length)];
        }

        function moveButtonToCorner() {
            const btn = document.getElementById('startBtn');
            const corner = getRandomCorner();
            btn.style.left = corner.x + 'px';
            btn.style.top = corner.y + 'px';
            btn.classList.add('dodging');
            
            setTimeout(() => {
                btn.classList.remove('dodging');
            }, 400);
        }

        function tryStartGame() {
            const btn = document.getElementById('startBtn');
            const clickCountEl = document.getElementById('clickCount');
            
            if (gameRunning) return;
            
            if (buttonClickCount < REQUIRED_CLICKS) {
                buttonClickCount++;
                
                if (buttonClickCount <= TEASE_MESSAGES.length) {
                    clickCountEl.textContent = TEASE_MESSAGES[buttonClickCount - 1];
                }
                
                moveButtonToCorner();
                
                if (buttonClickCount === REQUIRED_CLICKS) {
                    setTimeout(() => {
                        btn.style.left = '50%';
                        btn.style.top = '50%';
                        btn.style.transform = 'translate(-50%, -50%)';
                        btn.style.position = 'fixed';
                        clickCountEl.textContent = '‚úÖ ‡∏Å‡∏î‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß!';
                    }, 400);
                }
            } else if (buttonClickCount >= REQUIRED_CLICKS) {
                startGame();
            }
        }

        function startGame() {
            score = 0;
            targetHearts = 30;
            gameRunning = true;
            gameStartTime = Date.now();
            speedMultiplier = 1;
            buttonClickCount = 0;

            document.getElementById('startBtn').disabled = true;
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('clickCount').textContent = '';
            updateUI();
            spawnHearts();

            const speedCheckInterval = setInterval(() => {
                if (!gameRunning) {
                    clearInterval(speedCheckInterval);
                    return;
                }
                updateSpeedMultiplier();
            }, 1000);
        }

        function updateSpeedMultiplier() {
            const elapsed = (Date.now() - gameStartTime);
            const intervals = Math.floor(elapsed / SPEED_INCREASE_INTERVAL);
            const newSpeedMultiplier = Math.pow(SPEED_MULTIPLIER_FACTOR, intervals);
            
            if (Math.abs(newSpeedMultiplier - speedMultiplier) > 0.01) {
                speedMultiplier = newSpeedMultiplier;
                updateSpeedDisplay();
            }
        }

        function updateSpeedDisplay() {
            const displaySpeed = speedMultiplier.toFixed(2);
            document.getElementById('speedLevel').textContent = displaySpeed + 'x';
        }

        function getRandomColor() {
            const rand = Math.random() * 100;
            if (rand < HEART_COLORS.pink) return 'pink';
            if (rand < HEART_COLORS.pink + HEART_COLORS.green) return 'green';
            return 'black';
        }

        function getRandomSize() {
            return HEART_SIZES[Math.floor(Math.random() * HEART_SIZES.length)];
        }

        function getAnimationClass(multiplier) {
            if (multiplier >= 4.83) return 'speed-4-83';
            if (multiplier >= 3.71) return 'speed-3-71';
            if (multiplier >= 2.86) return 'speed-2-86';
            if (multiplier >= 2.2) return 'speed-2-2';
            if (multiplier >= 1.69) return 'speed-1-69';
            if (multiplier >= 1.3) return 'speed-1-3';
            return 'speed-1';
        }

        function updateUI() {
            document.getElementById('score').textContent = score;
            document.getElementById('remaining').textContent = Math.max(0, targetHearts - score);
            document.getElementById('targetCount').textContent = targetHearts;
        }

        function spawnHearts() {
            if (!gameRunning) return;

            const gameArea = document.getElementById('gameArea');
            const heart = document.createElement('div');
            heart.className = 'heart';

            const color = getRandomColor();
            const size = getRandomSize();
            const multiplier = speedMultiplier;

            heart.classList.add(color, size, getAnimationClass(multiplier));

            const randomX = Math.random() * (gameArea.clientWidth - 70);
            heart.style.left = randomX + 'px';
            heart.style.bottom = '0';
            heart.style.position = 'absolute';

            let heartValue = 1;
            
            if (color === 'pink') {
                heart.textContent = '‚ù§';
            } else if (color === 'green') {
                const img = document.createElement('img');
                img.src = GREEN_HEART_IMAGE;
                img.style.width = '100%';
                img.style.height = '100%';
                img.style.objectFit = 'cover';
                img.style.borderRadius = '50%';
                heart.appendChild(img);
                
                heartValue = 2;
                const bonusText = document.createElement('span');
                bonusText.className = 'bonus-text';
                bonusText.textContent = 'x2';
                bonusText.style.fontSize = '10px';
                heart.appendChild(bonusText);
            } else if (color === 'black') {
                const img = document.createElement('img');
                img.src = BLACK_HEART_IMAGE;
                img.style.width = '100%';
                img.style.height = '100%';
                img.style.objectFit = 'cover';
                img.style.borderRadius = '50%';
                heart.appendChild(img);
            }

            heart.onclick = (e) => {
                e.stopPropagation();
                heart.remove();

                score += heartValue;

                if (color === 'black') {
                    targetHearts += 2;
                }

                updateUI();

                if (score >= targetHearts) {
                    gameRunning = false;
                    document.getElementById('startBtn').disabled = false;
                    document.getElementById('startBtn').style.display = 'block';
                    buttonClickCount = 0;
                    document.getElementById('clickCount').textContent = '';
                    showWinModal();
                    return;
                }
            };

            gameArea.appendChild(heart);

            const baseDuration = 3000;
            const duration = baseDuration / multiplier;
            setTimeout(() => {
                if (heart.parentElement) {
                    heart.remove();
                }
            }, duration);

            if (gameRunning) {
                const baseSpawnRate = 800;
                const nextSpawnRate = baseSpawnRate / multiplier;
                setTimeout(spawnHearts, nextSpawnRate);
            }
        }

        function showWinModal() {
            const modal = document.getElementById('winModal');
            modal.classList.add('show');
        }

        window.addEventListener('load', () => {
            const btn = document.getElementById('startBtn');
            btn.style.left = '50%';
            btn.style.top = '50%';
            btn.style.transform = 'translate(-50%, -50%)';
        });
    </script>
</body>
</html>